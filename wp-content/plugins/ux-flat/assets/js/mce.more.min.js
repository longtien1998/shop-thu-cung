(function() {
    tinymce.PluginManager.add( 'more_text_shortcode', function( editor, url ) {
        editor.addButton('more_text_shortcode', {
            title: 'More',
            icon: 'icon dashicons-hidden',
            onclick: function() {
                editor.windowManager.open({
                    title: "More",
                    body: [{
                        type: 'textbox',
                        name: 'text',
                        label: 'Text',
						minWidth: 300,
                        value: ''
                    },
                    {
                        type: 'textbox',
                        multiline: true,
                        name: 'content',
                        label: 'Content',
						minWidth: 300,
						minHeight: 200,
                        value: ''
                    }],
                    onsubmit: function(e) {
                        var data = e.data;
                        console.log(data);
                        editor.insertContent('[more text="' + data.text + '"]' + data.content + '[/more]');
                    }
                });
            }
        })
    });
})();